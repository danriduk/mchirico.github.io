<!doctype html>
<html lang="en" class="no-js">
<head>
	
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="generator" content="RapidWeaver" />
		
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='https://fonts.googleapis.com/css?family=Droid+Sans:400,700|Ubuntu:300,400,700|Merriweather:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="all" href="../../rw_common/themes/split/consolidated-11.css" />
		 	
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script src="../../rw_common/themes/split/js/modernizr.js"></script>
	<title>Blog | Mike Chirico - Daily Blog</title>
	
	
	
	
	<link rel="alternate" type="application/rss+xml" title="My RSS Feed" href="https://mchirico.appspot.com/styled-3/blog/files/feed.xml" />
<script type="text/javascript" async src="https://mchirico.appspot.com/styled-3/blog/files/meta.js"></script>

<!-- Start Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-70072864-1', 'auto');
  ga('send', 'pageview');

</script><!-- End Google Analytics -->
</head>

<body>
	<header class="header">
		<div id="logo"><a href="https://mchirico.appspot.com/"><img src="../../rw_common/images/circles.png" width="240" height="240" alt="Site logo"/></a></div>

		<nav class="main-nav">
				<ul><li><a href="../../" rel="">Home</a></li><li><a href="../../styled-3/" rel="" class="currentAncestor parent">Blog</a></li><li><a href="../../photos/" rel="">Gallery</a></li><li><a href="../../contact-form/" rel="">Contact</a></li></ul>
		</nav> <!-- main-nav -->
	</header>

	<section id="intro">
		<div id="intro-background"></div>
		<div id="intro-tagline">
			<h1>A Developing Blog</h1> 
		</div> 
	</section> 

	<main class="content">
		<section id="subheader">
		
				<nav class="secondary-nav">
					<ul><li><ul><li><a href="./" rel="" id="current">Blog</a></li><li><a href="../../styled-3/markdown/" rel="">Day's Schedule</a></li><li><a href="../../styled-3/markdown-2/" rel="">Quick Notes</a></li><li><a href="../../styled-3/sitemap/" rel="">Sitemap</a></li></ul></li></ul>
				</nav> <!-- secondary-nav -->
		</section>
		
		<div class="container">
		<aside id="aside" role="complementary">
			<div id="sidebar">
					<h3 class="sidebarTitle"></h3>
					
					<div id="archives">
					<div id="blog-categories"><a href="files/category-pandas.html" class="blog-category-link-enabled">Pandas</a><br /><a href="files/category-python.html" class="blog-category-link-enabled">Python</a><br /><a href="files/category-swift.html" class="blog-category-link-enabled">Swift</a><br /></div><div id="blog-archives"><a class="blog-archive-link-enabled" href="files/archive-feb-2016.html">Feb 2016</a><br /><a class="blog-archive-link-enabled" href="files/archive-jan-2016.html">Jan 2016</a><br /><a class="blog-archive-link-enabled" href="files/archive-dec-2015.html">Dec 2015</a><br /><a class="blog-archive-link-enabled" href="files/archive-nov-2015.html">Nov 2015</a><br /></div><div id="blog-rss-feeds"><a class="blog-rss-link" href="files/feed.xml" rel="alternate" type="application/rss+xml" title="My RSS Feed">RSS Feed</a><br /></div>
					</div><!-- archives -->
			</div><!-- sidebar -->
		</aside><!-- aside -->
			<div id="contentContainer">
					<div id="unique-entry-id-28" class="blog-entry"><h1 class="blog-entry-title"><a href="files/b0d0d809a0f0687d6543059ca69f23e8-28.html" class="blog-permalink">Vomit -- more pandas</a></h1><div class="blog-entry-date">2016/02/14 13:57 </div><div class="blog-entry-body"><span style="font:11px Menlo-Regular; ">I spent the day working on charting auto accidents and calls to 911 for vomiting. Ugh, seems like unless amount of time trying to get the format correct..<br /><br /><br /><br /></span><img class="imageStyle" alt="Screenshot 2016-02-14 14.03.29" src="files/screenshot-2016-02-14-14.03.29.png" width="586" height="432" /><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; "><br /><br /><br /><br /><pre><code class="python"><br /></span><span style="font:11px Menlo-Regular; color:#007400;">#!/usr/bin/env python</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#C41915;">"""<br />import matplotlib<br />matplotlib.use('Agg')<br /><br /><br /><br />"""</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> requests<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> pandas </span><span style="font:11px Menlo-Regular; color:#AA0D91;">as</span><span style="font:11px Menlo-Regular; "> pd<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> matplotlib<br />matplotlib.use(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'Agg'</span><span style="font:11px Menlo-Regular; ">)<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> matplotlib.pyplot </span><span style="font:11px Menlo-Regular; color:#AA0D91;">as</span><span style="font:11px Menlo-Regular; "> plt<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> io<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> numpy </span><span style="font:11px Menlo-Regular; color:#AA0D91;">as</span><span style="font:11px Menlo-Regular; "> np<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> datetime<br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Read in the data</span><span style="font:11px Menlo-Regular; "><br />url=</span><span style="font:11px Menlo-Regular; color:#C41915;">"https://storage.googleapis.com/montco-stats/tz.csv"</span><span style="font:11px Menlo-Regular; "><br />d=requests.get(url).content<br />d=pd.read_csv(io.StringIO(d.decode(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'utf-8'</span><span style="font:11px Menlo-Regular; ">)))<br />d=pd.DataFrame(d)<br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Set index</span><span style="font:11px Menlo-Regular; "><br />d.index = pd.DatetimeIndex(d.timeStamp)<br /><br /><br /><br />ax = plt.subplot(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">111</span><span style="font:11px Menlo-Regular; ">)<br />ax.spines[</span><span style="font:11px Menlo-Regular; color:#C41915;">"top"</span><span style="font:11px Menlo-Regular; ">].set_visible(False)<br />ax.spines[</span><span style="font:11px Menlo-Regular; color:#C41915;">"bottom"</span><span style="font:11px Menlo-Regular; ">].set_visible(False)<br />ax.spines[</span><span style="font:11px Menlo-Regular; color:#C41915;">"right"</span><span style="font:11px Menlo-Regular; ">].set_visible(False)<br />ax.spines[</span><span style="font:11px Menlo-Regular; color:#C41915;">"left"</span><span style="font:11px Menlo-Regular; ">].set_visible(False)<br /><br /><br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Ensure that the axis ticks only show up on the bottom and left of the plot.</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Ticks on the right and top of the plot are generally unnecessary chartjunk.</span><span style="font:11px Menlo-Regular; "><br />ax.get_xaxis().tick_bottom()<br />ax.get_yaxis().tick_left()<br />ax.spines[</span><span style="font:11px Menlo-Regular; color:#C41915;">"top"</span><span style="font:11px Menlo-Regular; ">].set_visible(False)<br />ax.spines[</span><span style="font:11px Menlo-Regular; color:#C41915;">"bottom"</span><span style="font:11px Menlo-Regular; ">].set_visible(False)<br />ax.spines[</span><span style="font:11px Menlo-Regular; color:#C41915;">"right"</span><span style="font:11px Menlo-Regular; ">].set_visible(False)<br />ax.spines[</span><span style="font:11px Menlo-Regular; color:#C41915;">"left"</span><span style="font:11px Menlo-Regular; ">].set_visible(False)<br />ax.get_xaxis().tick_bottom()<br />ax.get_yaxis().tick_left()<br />plt.xticks(fontsize=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">8</span><span style="font:11px Menlo-Regular; ">)<br />plt.yticks(fontsize=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">7</span><span style="font:11px Menlo-Regular; ">)<br /><br /><br /><br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">def</span><span style="font:11px Menlo-Regular; "> createPivot(hr=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">24</span><span style="font:11px Menlo-Regular; ">):<br />  d.timeStamp=pd.DatetimeIndex(d.timeStamp)<br />  t24=datetime.datetime.now() - datetime.timedelta(hours=hr)<br />  tz=d[(d.timeStamp >= t24)]<br />  g = tz.groupby([</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'title'</span><span style="font:11px Menlo-Regular; ">]).agg({</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'e'</span><span style="font:11px Menlo-Regular; ">:sum})<br />  h=g.sort_values(by=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'e'</span><span style="font:11px Menlo-Regular; ">,ascending=False).head(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">2</span><span style="font:11px Menlo-Regular; ">)[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'e'</span><span style="font:11px Menlo-Regular; ">].to_dict()<br />  tz=tz[tz[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'title'</span><span style="font:11px Menlo-Regular; ">].isin(h.keys())]<br />  p=pd.pivot_table(tz, values=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'e'</span><span style="font:11px Menlo-Regular; ">, index=[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'timeStamp'</span><span style="font:11px Menlo-Regular; ">], columns=[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'title'</span><span style="font:11px Menlo-Regular; ">], aggfunc=np.sum)<br />  p.fillna(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">, inplace=True)<br />  j=p.resample(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'24H'</span><span style="font:11px Menlo-Regular; ">,how=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'sum'</span><span style="font:11px Menlo-Regular; ">)  <br />  j.fillna(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">, inplace=True)<br /></span><span style="font:11px Menlo-Regular; color:#007400;">#  j.index=j.index-pd.offsets.Hour(j.index.min().hour) - pd.offsets.Minute(j.index.min().minute) -pd.offsets.Second(j.index.min().second)</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#007400;">#  j.to_csv(file,index=True,header=True)</span><span style="font:11px Menlo-Regular; "><br />  j.to_csv(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'j.csv'</span><span style="font:11px Menlo-Regular; ">,index=True,header=True)<br />  jj=pd.read_csv(</span><span style="font:11px Menlo-Regular; color:#C41915;">"./j.csv"</span><span style="font:11px Menlo-Regular; ">)<br />  </span><span style="font:11px Menlo-Regular; color:#AA0D91;">return</span><span style="font:11px Menlo-Regular; "> (jj,j)<br /><br />(j,gj)=createPivot(hr=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">1000</span><span style="font:11px Menlo-Regular; ">)<br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># These are the "Tableau 20" colors as RGB.  </span><span style="font:11px Menlo-Regular; "><br />tableau20 = [(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">31</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">119</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">180</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">174</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">199</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">232</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">255</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">127</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">14</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">255</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">187</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">120</span><span style="font:11px Menlo-Regular; ">),  <br />             (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">44</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">160</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">44</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">152</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">223</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">138</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">214</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">39</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">40</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">255</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">152</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">150</span><span style="font:11px Menlo-Regular; ">),  <br />             (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">148</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">103</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">189</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">197</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">176</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">213</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">140</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">86</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">75</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">196</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">156</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">148</span><span style="font:11px Menlo-Regular; ">),  <br />             (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">227</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">119</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">194</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">247</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">182</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">210</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">127</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">127</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">127</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">199</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">199</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">199</span><span style="font:11px Menlo-Regular; ">),  <br />             (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">188</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">189</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">34</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">219</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">219</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">141</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">23</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">190</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">207</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">158</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">218</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">229</span><span style="font:11px Menlo-Regular; ">)]<br />tableau20 = [(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">255</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">174</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">199</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">232</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">255</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">127</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">14</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">255</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">187</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">120</span><span style="font:11px Menlo-Regular; ">),  <br />             (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">44</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">160</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">44</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">152</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">223</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">138</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">214</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">39</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">40</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">255</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">152</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">150</span><span style="font:11px Menlo-Regular; ">),  <br />             (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">148</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">103</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">189</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">197</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">176</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">213</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">140</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">86</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">75</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">196</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">156</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">148</span><span style="font:11px Menlo-Regular; ">),  <br />             (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">227</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">119</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">194</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">247</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">182</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">210</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">127</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">127</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">127</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">199</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">199</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">199</span><span style="font:11px Menlo-Regular; ">),  <br />             (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">188</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">189</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">34</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">219</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">219</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">141</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">23</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">190</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">207</span><span style="font:11px Menlo-Regular; ">), (</span><span style="font:11px Menlo-Regular; color:#1C00CF;">158</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">218</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">229</span><span style="font:11px Menlo-Regular; ">)]  <br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Scale the RGB values to the [0, 1] range, which is the format matplotlib accepts.  </span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">for</span><span style="font:11px Menlo-Regular; "> i </span><span style="font:11px Menlo-Regular; color:#AA0D91;">in</span><span style="font:11px Menlo-Regular; "> range(len(tableau20)):  <br />    r, g, b = tableau20[i]  <br />    tableau20[i] = (r / </span><span style="font:11px Menlo-Regular; color:#1C00CF;">255.</span><span style="font:11px Menlo-Regular; ">, g / </span><span style="font:11px Menlo-Regular; color:#1C00CF;">255.</span><span style="font:11px Menlo-Regular; ">, b / </span><span style="font:11px Menlo-Regular; color:#1C00CF;">255.</span><span style="font:11px Menlo-Regular; ">)  <br /><br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">def</span><span style="font:11px Menlo-Regular; "> fixTime(x):<br />    </span><span style="font:11px Menlo-Regular; color:#AA0D91;">try</span><span style="font:11px Menlo-Regular; ">:<br />        </span><span style="font:11px Menlo-Regular; color:#AA0D91;">return</span><span style="font:11px Menlo-Regular; "> datetime.datetime.strptime(x,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'%Y-%m-%d %H:%M:%S'</span><span style="font:11px Menlo-Regular; ">)<br />    </span><span style="font:11px Menlo-Regular; color:#AA0D91;">except</span><span style="font:11px Menlo-Regular; ">:<br />        </span><span style="font:11px Menlo-Regular; color:#AA0D91;">return</span><span style="font:11px Menlo-Regular; "> datetime.datetime.strptime(x,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'%Y-%m-%d'</span><span style="font:11px Menlo-Regular; ">)<br /></span><span style="font:11px Menlo-Regular; color:#007400;">#    return int(datetime.datetime.strptime(x,'%Y-%m-%d %H:%M:%S').hour)</span><span style="font:11px Menlo-Regular; "><br /><br /><br /><br />tics=[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'ro'</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">'bs'</span><span style="font:11px Menlo-Regular; ">, </span><span style="font:11px Menlo-Regular; color:#1C00CF;">'g^'</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'ro'</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'bo'</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'yo'</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'r^'</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'b--'</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'g--'</span><span style="font:11px Menlo-Regular; ">]<br /><br /><br />timeHrs=[fixTime(x) </span><span style="font:11px Menlo-Regular; color:#AA0D91;">for</span><span style="font:11px Menlo-Regular; "> x </span><span style="font:11px Menlo-Regular; color:#AA0D91;">in</span><span style="font:11px Menlo-Regular; "> j.timeStamp.values]<br />rank=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">    <br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">for</span><span style="font:11px Menlo-Regular; "> col </span><span style="font:11px Menlo-Regular; color:#AA0D91;">in</span><span style="font:11px Menlo-Regular; "> list(j.columns)[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">1</span><span style="font:11px Menlo-Regular; ">::]:<br />    plt.plot(timeHrs,<br />             j[col].values,tics[rank],<br />             lw=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0.9</span><span style="font:11px Menlo-Regular; ">, color=tableau20[rank])<br />    rank+=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">1</span><span style="font:11px Menlo-Regular; "><br />rank=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">    <br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">for</span><span style="font:11px Menlo-Regular; "> col </span><span style="font:11px Menlo-Regular; color:#AA0D91;">in</span><span style="font:11px Menlo-Regular; "> list(j.columns)[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">1</span><span style="font:11px Menlo-Regular; ">::]:<br />    plt.plot(timeHrs,<br />             j[col].values,<br />             lw=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0.9</span><span style="font:11px Menlo-Regular; ">, color=tableau20[rank])<br />    rank+=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">1</span><span style="font:11px Menlo-Regular; ">    <br /></span><span style="font:11px Menlo-Regular; color:#007400;">#plt.savefig("junk.svg",format="svg", bbox_inches="tight")</span><span style="font:11px Menlo-Regular; "><br />plt.savefig(</span><span style="font:11px Menlo-Regular; color:#C41915;">"junk.png"</span><span style="font:11px Menlo-Regular; ">,format=</span><span style="font:11px Menlo-Regular; color:#C41915;">"png"</span><span style="font:11px Menlo-Regular; ">, bbox_inches=</span><span style="font:11px Menlo-Regular; color:#C41915;">"tight"</span><span style="font:11px Menlo-Regular; ">)<br /></code></pre><br /><br /><br />The plan was to get something anyone could download from Cloud9 and start analyzing the data.<br /><br /><pre><code class="python"><br /></span><span style="font:11px Menlo-Regular; color:#007400;">#!/usr/bin/env python</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#C41915;">"""<br />  src: https://github.com/mchirico/montcoalert/raw/master/src/python/vomit.py<br />   You can run this on cloud9<br />   wget https://github.com/mchirico/montcoalert/raw/master/src/python/vomit.py<br /><br />    Install Anaconda:<br />      <br />      Step 1:<br /><br />        Get the latest version of Anaconda2<br />         $ wget https://repo.continuum.io/archive/Anaconda2-2.5.0-Linux-x86_64.sh<br />         $ bash ./wget https://repo.continuum.io/archive/Anaconda2-2.5.0-Linux-x86_64.sh<br />  <br />  <br />"""</span><span style="font:11px Menlo-Regular; "><br /><br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> requests<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> pandas </span><span style="font:11px Menlo-Regular; color:#AA0D91;">as</span><span style="font:11px Menlo-Regular; "> pd<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> matplotlib.pyplot </span><span style="font:11px Menlo-Regular; color:#AA0D91;">as</span><span style="font:11px Menlo-Regular; "> plt<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> io<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">import</span><span style="font:11px Menlo-Regular; "> numpy </span><span style="font:11px Menlo-Regular; color:#AA0D91;">as</span><span style="font:11px Menlo-Regular; "> np<br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Read in the data</span><span style="font:11px Menlo-Regular; "><br />url=</span><span style="font:11px Menlo-Regular; color:#C41915;">"https://storage.googleapis.com/montco-stats/tz.csv"</span><span style="font:11px Menlo-Regular; "><br />d=requests.get(url).content<br />d=pd.read_csv(io.StringIO(d.decode(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'utf-8'</span><span style="font:11px Menlo-Regular; ">)))<br />d=pd.DataFrame(d)<br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Set index</span><span style="font:11px Menlo-Regular; "><br />d.index = pd.DatetimeIndex(d.timeStamp)<br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Take a look at just 'EMS: NAUSEA/VOMITING' for this year</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># set to temporary variable tz</span><span style="font:11px Menlo-Regular; "><br />tz=d[(d.title == </span><span style="font:11px Menlo-Regular; color:#1C00CF;">'EMS: NAUSEA/VOMITING'</span><span style="font:11px Menlo-Regular; ">) & (d.timeStamp >= </span><span style="font:11px Menlo-Regular; color:#1C00CF;">'2016-01-01 00:00:00'</span><span style="font:11px Menlo-Regular; ">)]<br /><br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">print</span><span style="font:11px Menlo-Regular; "> tz.title.count()  </span><span style="font:11px Menlo-Regular; color:#007400;"># prints 187 currently</span><span style="font:11px Menlo-Regular; "><br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Group by just title</span><span style="font:11px Menlo-Regular; "><br />g = d.groupby([</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'title'</span><span style="font:11px Menlo-Regular; ">])<br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Look at the data every 100 hours. Note 60T = 1hr, 60*100=6000</span><span style="font:11px Menlo-Regular; "><br />kt100=g[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'e'</span><span style="font:11px Menlo-Regular; ">].resample(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'6000T'</span><span style="font:11px Menlo-Regular; ">, how=[np.sum,np.mean,np.median, len])<br />kt100.fillna(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">, inplace=True)<br /><br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Write it out to .csv</span><span style="font:11px Menlo-Regular; "><br />vomit=kt100.ix[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'EMS: NAUSEA/VOMITING'</span><span style="font:11px Menlo-Regular; ">][</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'sum'</span><span style="font:11px Menlo-Regular; ">]<br />vomit.to_csv(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'vomit100hr.csv'</span><span style="font:11px Menlo-Regular; ">,index=True,header=True)<br /><br /></span><span style="font:11px Menlo-Regular; color:#C41915;">"""<br />  This is what we see in vomit100hr.csv<br />  ...<br />  2016-01-29 00:00:00,23.0<br />  2016-02-02 04:00:00,15.0<br />  2016-02-06 08:00:00,26.0<br />  2016-02-10 12:00:00,17.0<br />  <br />  Note that the last entry will almost always be a lower<br />  sum, since it doesn't contain the full 100hrs.<br />  <br />"""</span><span style="font:11px Menlo-Regular; "><br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Let's look at every 50 hours... shorten the time</span><span style="font:11px Menlo-Regular; "><br />kt50=g[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'e'</span><span style="font:11px Menlo-Regular; ">].resample(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'3000T'</span><span style="font:11px Menlo-Regular; ">, how=[np.sum,np.mean,np.median, len])<br />kt50.fillna(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">, inplace=True)<br /><br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Write it out to .csv</span><span style="font:11px Menlo-Regular; "><br />vomit50=kt50.ix[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'EMS: NAUSEA/VOMITING'</span><span style="font:11px Menlo-Regular; ">][</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'sum'</span><span style="font:11px Menlo-Regular; ">]<br />vomit50.to_csv(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'vomit50hr.csv'</span><span style="font:11px Menlo-Regular; ">,index=True,header=True)<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">print</span><span style="font:11px Menlo-Regular; "> vomit50.tail()<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">print</span><span style="font:11px Menlo-Regular; "> </span><span style="font:11px Menlo-Regular; color:#C41915;">"\n\nStats on 50hr"</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">print</span><span style="font:11px Menlo-Regular; "> </span><span style="font:11px Menlo-Regular; color:#C41915;">"Max: %d Mean:% 6.2f Median:% 6.2f"</span><span style="font:11px Menlo-Regular; "> % (vomit50.max(),vomit50.mean(),vomit50.median())<br />s=</span><span style="font:11px Menlo-Regular; color:#C41915;">"Quantiles: 25%,   50%,  75%,   90%    100%\n"</span><span style="font:11px Menlo-Regular; "><br />s+=</span><span style="font:11px Menlo-Regular; color:#C41915;">"         % 6.2f % 6.2f % 6.2f % 6.2f % 6.2f"</span><span style="font:11px Menlo-Regular; "> % (vomit50.quantile(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0.25</span><span style="font:11px Menlo-Regular; ">),<br />                                             vomit50.quantile(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0.50</span><span style="font:11px Menlo-Regular; ">),<br />                                                    vomit50.quantile(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0.75</span><span style="font:11px Menlo-Regular; ">),<br />                                                    vomit50.quantile(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0.9</span><span style="font:11px Menlo-Regular; ">),<br />                                                    vomit50.quantile(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">1</span><span style="font:11px Menlo-Regular; ">))<br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">print</span><span style="font:11px Menlo-Regular; "> s<br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;">#  If you want to see the display</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#007400;">#  vomit50.plot()</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#007400;">#  plt.savefig('vomit50.png', bbox_inches='tight')</span><span style="font:11px Menlo-Regular; "><br /><br /></span><span style="font:11px Menlo-Regular; color:#C41915;">"""<br />  Now we get the following<br />  ...<br />  2016-02-04 06:00:00,7.0<br />  2016-02-06 08:00:00,6.0<br />  2016-02-08 10:00:00,20.0   <---- A slight spike<br />  2016-02-10 12:00:00,13.0<br />  2016-02-12 14:00:00,4.0<br />  <br />  Stats on 50hr<br />  Max: 20 Mean:  8.31 Median:  7.00<br />  Quantiles: 25%,   50%,  75%,   90%<br />             6.00   7.00  10.00  13.00<br />  <br />  <br />"""</span><span style="font:11px Menlo-Regular; "><br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Not using this</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#C41915;">"""<br /># Group by title and township<br />g = d.groupby(['title','twp'])<br /><br /># Look at the data every 100 hours. Note 60T = 1hr, 60*100=6000<br />k100=g['e'].resample('6000T', how=[np.sum,np.mean,np.median, len])<br />k100.fillna(0, inplace=True)<br />"""</span><span style="font:11px Menlo-Regular; "><br /><br /><br /><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Create pivot table</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># Start with the group we want</span><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; color:#007400;"># You need this for pivots</span><span style="font:11px Menlo-Regular; "><br />d.timeStamp=pd.DatetimeIndex(d.timeStamp)<br /><br /></span><span style="font:11px Menlo-Regular; color:#AA0D91;">def</span><span style="font:11px Menlo-Regular; "> createPivot(title=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'EMS: NAUSEA/VOMITING'</span><span style="font:11px Menlo-Regular; ">,hr=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'72H'</span><span style="font:11px Menlo-Regular; ">):<br />  d.timeStamp=pd.DatetimeIndex(d.timeStamp)<br />  tz=d[(d.title == title)]<br />  tz.index=pd.DatetimeIndex(tz.timeStamp)<br /></span><span style="font:11px Menlo-Regular; color:#007400;">#  tz[(tz.title=='EMS: ABDOMINAL PAINS') & (tz.twp=='CHELTENHAM')]</span><span style="font:11px Menlo-Regular; "><br />  p=pd.pivot_table(tz, values=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'e'</span><span style="font:11px Menlo-Regular; ">, index=[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'timeStamp'</span><span style="font:11px Menlo-Regular; ">], columns=[</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'twp'</span><span style="font:11px Menlo-Regular; ">], aggfunc=np.sum)<br />  </span><span style="font:11px Menlo-Regular; color:#007400;"># Make sure you don't do this</span><span style="font:11px Menlo-Regular; "><br />  </span><span style="font:11px Menlo-Regular; color:#007400;">#j=p.resample('4D',how='sum', fill_method='pad')</span><span style="font:11px Menlo-Regular; "><br />  j=p.resample(hr,how=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'sum'</span><span style="font:11px Menlo-Regular; ">)<br />  j.fillna(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">0</span><span style="font:11px Menlo-Regular; ">, inplace=True)<br />  s=title.replace(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">' '</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'_'</span><span style="font:11px Menlo-Regular; ">).replace(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'/'</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'_'</span><span style="font:11px Menlo-Regular; ">).replace(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">' '</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'_'</span><span style="font:11px Menlo-Regular; ">).replace(</span><span style="font:11px Menlo-Regular; color:#1C00CF;">':'</span><span style="font:11px Menlo-Regular; ">,</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'_'</span><span style="font:11px Menlo-Regular; ">)<br />  file=</span><span style="font:11px Menlo-Regular; color:#C41915;">"pivot%s.csv"</span><span style="font:11px Menlo-Regular; "> % (s)<br />  j.index=j.index-pd.offsets.Hour(j.index.min().hour) - pd.offsets.Minute(j.index.min().minute) -pd.offsets.Second(j.index.min().second)<br />  j.to_csv(file,index=True,header=True)<br /><br />createPivot(title=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'EMS: NAUSEA/VOMITING'</span><span style="font:11px Menlo-Regular; ">,hr=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'100H'</span><span style="font:11px Menlo-Regular; ">)<br />createPivot(title=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'EMS: ABDOMINAL PAINS'</span><span style="font:11px Menlo-Regular; ">,hr=</span><span style="font:11px Menlo-Regular; color:#1C00CF;">'100H'</span><span style="font:11px Menlo-Regular; ">)<br /><br /><br /></code></pre><br /></span><div class="blog-entry-comments"><a class="blog-comment-link" href="files/b0d0d809a0f0687d6543059ca69f23e8-28.html#disqus_thread">Comments</a></div></div></div><div id="unique-entry-id-27" class="blog-entry"><h1 class="blog-entry-title"><a href="files/f303c6149aa410dbe69d81c5eece1df1-27.html" class="blog-permalink">Machine Learning Courses</a></h1><div class="blog-entry-date">2016/02/03 22:12 </div><div class="blog-entry-body"><span style="font:11px Menlo-Regular; "><br />Recommended reading list:<br /></span><span style="font:11px Menlo-Regular; "><a href="https://redd.it/1jeawf" rel="external">https://redd.it/1jeawf</a></span><span style="font:11px Menlo-Regular; "><br /><br /><br /><br /></span><a href="https://www.otexts.org/fpp/" rel="external"><img class="imageStyle" alt="Screenshot 2016-02-08 19.52.09" src="files/screenshot-2016-02-08-19.52.09.png" width="649" height="337" /></a><span style="font:11px Menlo-Regular; "><br /></span><span style="font:11px Menlo-Regular; "><br /><br /><br /><br /><br /></span><span style="font:11px Menlo-Regular; "><a href="https://www.coursera.org/learn/practical-machine-learning/lecture/HZKcr/cross-validation">https://www.coursera.org/learn/practical-machine-learning/lecture/HZKcr/cross-validation</a></span><span style="font:11px Menlo-Regular; "><br /><br /><br /></span><span style="font:15px Arial, Verdana, Helvetica, sans-serif; color:#535353;"><a href="http://golang.org/s/oracle-user-manual " rel="external">http://golang.org/s/oracle-user-manual</a></span><span style="font:12px Times-Roman; color:#000000;"><br /></span><span style="font:11px Menlo-Regular; "><br /><br /></span><div class="blog-entry-comments"><a class="blog-comment-link" href="files/f303c6149aa410dbe69d81c5eece1df1-27.html#disqus_thread">Comments</a></div></div></div><div id="unique-entry-id-26" class="blog-entry"><h1 class="blog-entry-title"><a href="files/569eb33a00f476abe0ccdb1038a54407-26.html" class="blog-permalink">Traffic</a></h1><div class="blog-entry-date">2016/01/30 20:32 </div><div class="blog-entry-body"><span style="font:11px Menlo-Regular; ">Link to traffic </span><span style="font:11px Menlo-Regular; "><a href="https://www.google.com/fusiontables/embedviz?q=select+col0+from+1tnwsh9W0j1ArhGBqgwePVUDf8jWMmLK3abKgzu8d+where+col4+in+('EMS%3A+VEHICLE+FIRE'%2C+'EMS%3A+VEHICLE+ACCIDENT'%2C+'Fire%3A+VEHICLE+FIRE'%2C+'Fire%3A+VEHICLE+LEAKING+FUEL'%2C+'Traffic%3A+VEHICLE+ACCIDENT+-'%2C+'Traffic%3A+VEHICLE+FIRE+-'%2C+'Traffic%3A+VEHICLE+LEAKING+FUEL+-')&viz=MAP&h=false&lat=40.06565711262258&lng=-75.12500650685632&t=1&z=17&l=col0&y=3&tmplt=3&hml=TWO_COL_LAT_LNG" rel="external">map</a></span><span style="font:11px Menlo-Regular; "><br /><br /><br /></span><div class="blog-entry-comments"><a class="blog-comment-link" href="files/569eb33a00f476abe0ccdb1038a54407-26.html#disqus_thread">Comments</a></div></div></div><div id="unique-entry-id-25" class="blog-entry"><h1 class="blog-entry-title"><a href="files/e70c6d3f1fc12f2ad2c266c9a174e8e8-25.html" class="blog-permalink">Iris</a></h1><div class="blog-entry-date">2016/01/20 17:56 </div><div class="blog-entry-body"><span style="font:11px Menlo-Regular; ">Cool&hellip;.Kaggle has a page devoted to the Iris dataset<br /><br /></span><span style="font:11px Menlo-Regular; "><a href="https://www.kaggle.com/uciml/iris">https://www.kaggle.com/uciml/iris</a></span><span style="font:11px Menlo-Regular; "><br /><br />True, it's easy enough to get the data, however, it's nice to test out technologies on this dataset in a public area, for instructional purposes.</span><div class="blog-entry-comments"><a class="blog-comment-link" href="files/e70c6d3f1fc12f2ad2c266c9a174e8e8-25.html#disqus_thread">Comments</a></div></div></div><div id="unique-entry-id-24" class="blog-entry"><h1 class="blog-entry-title"><a href="files/4cb40338bff392a9644706d980da0a4e-24.html" class="blog-permalink">Python</a></h1><div class="blog-entry-date">2016/01/15 05:43 </div><div class="blog-entry-body"><span style="font:11px Menlo-Regular; ">Good clean python resource:<br /></span><span style="font:11px Menlo-Regular; "><a href="http://cs231n.github.io/python-numpy-tutorial/#python-containers">http://cs231n.github.io/python-numpy-tutorial/#python-containers</a></span><span style="font:11px Menlo-Regular; "><br /><br /></span><div class="blog-entry-comments"><a class="blog-comment-link" href="files/4cb40338bff392a9644706d980da0a4e-24.html#disqus_thread">Comments</a></div></div></div>

<script type="text/javascript">
//<![CDATA[
var disqus_shortname = 'mchirico';
(function() {
	var s = document.createElement('script'); s.async = true;
	s.type = 'text/javascript';
	s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
	(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
	}());
//]]>
</script>

			</div>
		</div>
	</main> <!-- content -->
	
	<footer id="footer" role="contentinfo" class="clearfix">	
		<div id="footerContent">
			<div id="footerText">&copy; 2016 Mike Chirico <a href="mailto:mchirico@gmail.com">Contact Me</a></div>
		</div><!-- footerContainer -->
		<div class="clearer"></div>
	</footer><!-- footer -->
	<script src="../../rw_common/themes/split/js/yuzoolthemes.js"></script>
	<script type="text/javascript" src="../../rw_common/themes/split/javascript.js"></script>
<script src="../../rw_common/assets/global.js" type="text/javascript"></script>
</body>
</html><!-- END html -->